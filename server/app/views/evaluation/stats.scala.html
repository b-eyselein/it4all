@import model.feedback.{EvaluatedAspects, FeedbackResult, Mark}

@(user: model.User, feedbackResults: Seq[FeedbackResult])

@main("Evaluation", Some(user)) {
    <div class="container">
        <h1 class="text-center">Auswertung der Evaluation der Tools</h1>

        @if(feedbackResults.nonEmpty) {
            @for(res <- feedbackResults) {
                <h2 class="text-center">@res.tool</h2>

                <table class="table">
                    <thead>
                        <tr>
                            <th>Frage</th>
                            <th>#</th>
                            <th>&empty;</th>
                            @for(mark <- Mark.values) {
                                <th>@mark.value</th>
                            }
                        </tr>
                    </thead>
                    <tbody>
                    @for(evaledAspect <- EvaluatedAspects.values; marks = res.feedbackFor(evaledAspect);
                            avgAndCount = FeedbackResult.avgAndCount(marks)) {
                        <tr>
                            <td>@evaledAspect.question</td>
                            <td>@avgAndCount._2</td>
                            <td>@avgAndCount._1</td>
                            @for(mark <- Mark.values) {
                                <td>@marks.getOrElse(mark, 0)</td>
                            }
                        </tr>
                    }
                    </tbody>
                </table>

                <h3>Kommentare (@res.allComments.size)</h3>

                <ul>
                @for(comment <- res.allComments) {
                    <li>@comment</li>
                }
                </ul>
            }
        } else {
            <div class="alert alert-danger">Konnte keine Resultate finden.</div>
        }

    </div>
}
