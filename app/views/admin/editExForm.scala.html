@import model._
@import model.core.CoreConsts

@(user: User, toolObject: model.core.tools.ExToolObject, exerciseOpt: Option[CompleteEx[_]], renderedRest: Html)

@isCreation = @{
    exerciseOpt.isEmpty
}

@main(s"${toolObject.toolname}: Aufgabe ${if(isCreation) "erstellen" else "bearbeiten"}", user) {
    <div class="container">
        <div class="page-header">
            <h1>@if(isCreation) {Erstellen} else {Bearbeiten} einer @toolObject.toolname-Aufgabe</h1>
        </div>

        <form class="form" method="post" role="form" action="@toolObject.editExerciseRoute(exerciseOpt.get.ex)">

            <fieldset>
                <legend>Standardangaben</legend>

                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="@CoreConsts.ID_NAME">ID:</label>
                        <input type="number" class="form-control from-control-static" name="@CoreConsts.ID_NAME" id="@CoreConsts.ID_NAME" required
                        @Html(exerciseOpt.map(ex => s"""value="${ex.ex.id}" readonly""").getOrElse(""))>
                    </div>
                    <div class="col-sm-6">
                        <label for="@CoreConsts.AUTHOR_NAME">Autor:</label>
                        <input class="form-control" name="@CoreConsts.AUTHOR_NAME" id="@CoreConsts.AUTHOR_NAME" value="@user.username"
                        title="Dieser Wert kann nicht geÃ¤ndert werden." readonly required>
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-sm-6">
                        <label for="@CoreConsts.TITLE_NAME">Titel:</label>
                        <input class="form-control" name="@CoreConsts.TITLE_NAME" id="@CoreConsts.TITLE_NAME" required
                        @Html(exerciseOpt.map(ex => s"""value="${ex.ex.title}"""").getOrElse(""))>
                    </div>
                    <div class="col-sm-6">
                        <label for="@CoreConsts.STATE_NAME">Status:</label>
                        <div >
                            <select class="form-control" name="@CoreConsts.STATE_NAME" id="@CoreConsts.STATE_NAME" required>
                            @for(state <- model.Enums.ExerciseState.values) {
                                <option @state.isSelected(exerciseOpt.map(_.ex.state).getOrElse(model.Enums.ExerciseState.CREATED))>@state </option>
                            }
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="@CoreConsts.TEXT_NAME">Text:</label>
                    <textarea class="form-control" rows="5" name="@CoreConsts.TEXT_NAME" id="@CoreConsts.TEXT_NAME" required>@exerciseOpt.map(_.ex.text).getOrElse("")</textarea>
                </div>

            </fieldset>

            @renderedRest

            <hr>

            <div class="form-group">
                <div class="col-sm-12">
                    <button class="btn btn-primary btn-block">Aufgabe bearbeiten</button>
                </div>
            </div>
        </form>

    </div>
}

