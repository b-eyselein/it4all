@(user: model.User, exercise: model.programming.ProgExercise, oldData: List[model.programming.CommitedTestData])

@main("Programmierung: Defintion von Testdaten", user) {
    <script src="@routes.Assets.versioned("javascripts/programming.js")"></script>

    <div class="container">
        <div class="page-header">
            <h1>Definition von Testdaten</h1>
        </div>

        <div class="panel panel-success">
            <div class="panel-heading">Funktionsbeschreibung</div>
            <div class="panel-body">@Html(exercise.text)</div>
        </div>

        <div class="alert alert-info alert-dismissable">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
            Hier k&ouml;nnen Sie sich eigene Testdaten definieren, um die Funktion kennenzulernen und zus&auml;tzliche Testdaten zu nutzen.
            Diese k&ouml;nnen gegen eine Musterl&ouml;sung validiert werden.
            Au&szlig;erdem werden Sie automatisch beim Testen ihrer L&ouml;sung verwendet.
        </div>

        <form class="form" action="@controllers.programming.routes.ProgController.validateTestData(exercise.id)" method="post">
            <input hidden name="inputCount" id="inputCount" value="@exercise.inputCount">
            <input hidden name="testCount" id="testCount"
            value="@Math.max(oldData.size, controllers.programming.ProgController.STD_TEST_DATA_COUNT)">
            <table class="table" id="testDataTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        @for(i <- 0 until exercise.inputCount) {
                            <th>Input @{
                                i + 1
                            }</th>
                        }
                        <th>Output</th>
                    </tr>
                </thead>

                <tbody id="testDataRows">
                    @for(old <- oldData) {
                        <tr id="tr_@old.id">
                            <td>@old.id</td>
                            @for((input, inputCount) <- old.getInput.zipWithIndex) {
                                <td>
                                    <input class="form-control" value="@input" name="inp_@{
                                        inputCount
                                    }_@old.id"
                                    id="inp_@{
                                        inputCount
                                    }_@old.id" placeholder="Test @old.id, Input @inputCount">
                                </td>
                            }
                            <td>
                                <input class="form-control" value="@old.output" name="outp_@old.id" id="outp_@old.id"
                                placeholder="Test @old.id, Output">
                            </td>
                        </tr>
                    }
                    @for(testCount <- oldData.size until controllers.programming.ProgController.STD_TEST_DATA_COUNT) {
                        <tr id="tr_@testCount">
                            <td>@testCount</td>
                            @for(inputCount <- 0 until exercise.inputCount) {
                                <td>
                                    <input class="form-control" name="inp_@{
                                        inputCount
                                    }_@testCount" id="inp_@{
                                        inputCount
                                    }_@testCount"
                                    placeholder="Test @testCount, Input @inputCount">
                                </td>
                            }
                            <td><input class="form-control" name="outp_@testCount" id="outp_@testCount" placeholder="Test @testCount, Output"></td>
                        </tr>
                    }
                    <tr>
                        <td colspan="4">
                            <button type="button" class="btn btn-default" onclick="moreTestData()">
                                <span class="glyphicon glyphicon-plus"></span> Weitere Testdaten erstellen
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div class="btn-group btn-group-justified">
                <div class="btn-group">
                    <button type="button" class="btn btn-primary"
                    onclick="validateTestData('@controllers.programming.routes.ProgController.validateTestDataLive(exercise.id)')">
                        Testdaten validieren
                    </button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-success">Testdaten speichern</button>
                </div>
            </div>

        </form>
    </div>
}