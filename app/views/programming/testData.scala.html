@(user: model.User, exercise: model.programming.ProgCompleteEx, oldData: Seq[model.programming.CommitedTestData])

@scripts = {
    <script src="@routes.Assets.versioned("javascripts/programming.js")"></script>
}

@main("Programmierung: Defintion von Testdaten", user, scripts) {
    <div class="container">
        <div class="page-header">
            <h1>Definition von Testdaten</h1>
        </div>

        <div class="row">
            <div class="col-md-6">
                <p class="text-info">
                    Hier k&ouml;nnen Sie sich eigene Testdaten definieren, um die Funktion kennenzulernen und zus&auml;tzliche Testdaten zu nutzen.
                    Diese k&ouml;nnen gegen eine Musterl&ouml;sung validiert werden.
                    Au&szlig;erdem werden Sie automatisch beim Testen ihrer L&ouml;sung verwendet.
                </p>


                <hr>

                <h2>Beschreibung der Funktion</h2>
                @Html(exercise.ex.text)
            </div>

            <div class="col-md-6">

                <form class="form" action="@controllers.idExes.routes.ProgController.validateTestData(exercise.ex.id)" method="post">
                    <input title="hidden" hidden type="number" name="inputCount" id="inputCount" value="@exercise.ex.inputCount">
                    <input title="hidden" hidden type="number" name="testCount" id="testCount" value="@Math.max(oldData.size, controllers.idExes.ProgController.STD_TEST_DATA_COUNT)">
                    <table class="table" id="testDataTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                @for(i <- 1 to exercise.ex.inputCount) {
                                    <th>Input @i</th>
                                }
                                <th>Output</th>
                            </tr>
                        </thead>

                        <tbody id="testDataRows">
                            @for(old <- oldData) {
                                <tr id="tr_@old.id">
                                    <td>@old.id</td>
                                    @*for((input, inputCount) <- Seq.empty/*old.input */ .zipWithIndex) {*@
                                    @*<td>*@
                                    @*<input class="form-control" value="@input" name="inp_@{*@
                                    @*inputCount*@
                                    @*}_@old.id"*@
                                    @*id="inp_@{*@
                                    @*inputCount*@
                                    @*}_@old.id" placeholder="Test @old.id, Input @inputCount">*@
                                    @*</td>*@
                                    @*}*@
                                    <td>
                                        <input class="form-control" value="@old.output" name="outp_@old.id" id="outp_@old.id"
                                        placeholder="Test @old.id, Output">
                                    </td>
                                </tr>
                            }
                            @for(testCount <- oldData.size until controllers.idExes.ProgController.STD_TEST_DATA_COUNT) {
                                <tr id="tr_@testCount">
                                    <td>@testCount</td>
                                    @for(inputCount <- 0 until exercise.ex.inputCount) {
                                        <td>
                                            <input class="form-control" name="inp_@{
                                                inputCount
                                            }_@testCount" id="inp_@{
                                                inputCount
                                            }_@testCount"
                                            placeholder="Test @{
                                                testCount + 1
                                            }, Input @{
                                                inputCount + 1
                                            }">
                                        </td>
                                    }
                                    <td><input class="form-control" name="outp_@testCount" id="outp_@testCount" placeholder="Test @testCount, Output"></td>
                                </tr>
                            }
                            <tr>
                                <td colspan="4">
                                    <button type="button" class="btn btn-default" onclick="moreTestData()">
                                        <span class="glyphicon glyphicon-plus"></span> Weitere Testdaten erstellen
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="btn-group btn-group-justified">
                        <div class="btn-group">
                            <button type="button" class="btn btn-primary"
                            onclick="validateTestData('@controllers.idExes.routes.ProgController.validateTestDataLive(exercise.ex.id)')">
                                Testdaten validieren
                            </button>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-success">Testdaten speichern</button>
                        </div>
                    </div>

                </form>
            </div>


        </div>
    </div>
}