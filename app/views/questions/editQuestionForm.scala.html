@(user: model.User, question: model.questions.Question, isEdit: Boolean)

@scripts = {
    <script src="@routes.Assets.versioned("javascripts/choicequestions.js")"></script>

    <script>
            $(document).ready(function () {
                onAnswerNumChange();
            });
    </script>
}

@main("Auswahlfrage erstellen", user, scripts) {
    <div class="container">
        <div class="page-header">
        @if(isEdit) {
            <h1>Frage editieren</h1>
        } else {
            <h1>Neue Frage erstellen</h1>
        }
        </div>

        <form class="form-horizontal" method="post" action="@controllers.exCollections.routes.QuestionController.editQuestion(question.id)">
            <div class="form-group">
                <label class="control-label col-sm-2" for="title">Titel:</label>
                <div class="col-sm-10">
                    <input class="form-control" id="title" name="title" required placeholder="Alter Titel: '@question.title'"
                    value="@question.title">
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="text">Text:</label>
                <div class="col-sm-10">
                    <input class="form-control" id="text" name="text" required placeholder="Alter Text: '@question.text'"
                    value="@question.text">
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="author">Autor:</label>
                <div class="col-sm-10">
                    <input class="form-control" id="author" name="author" readonly required value="@question.author">
                </div>
            </div>

            <div class="form-group">
                <label class="control-label col-sm-2" for="numOfAnswers">Anzahl Antworten:</label>
                <div class="col-sm-10">
                    <input class="form-control" type="number" name="numOfAnswers" id="numOfAnswers"
                    onchange="onAnswerNumChange();" min="2" max="8" value="@@question.answers.size()" required>
                </div>
            </div>

            @for(answer <- question.answers) {
                <div class="form-group">
                    <label class="control-label col-sm-2">@answer.id. Antwort:</label>
                    <div class="col-sm-10" id="answerDiv">
                        <div class="input-group">
                            <input hidden name="correctness_@answer.id" id="correctness_@answer.id" value="@answer.correctness">
                            <input class="form-control" name="@answer.id" id="@answer.id" placeholder="Alte Antwort: '@answer.text'" value="@answer.text">
                            <div class="input-group-btn">
                            @for(correctness <- model.questions.QuestionEnums.Correctness.values()) {
                                <button type="button" onclick="changeCorrectness(@answer.id, '@correctness', this)" title="@correctness.title"
                                class="btn btn-@if(correctness == answer.correctness) {@correctness.bsButtonColor} else {default}">
                                    <span class="@correctness.bsGlyphicon"></span>
                                </button>
                            }
                            </div>
                        </div>
                    </div>
                </div>
            }

            @* Fill up missing answers until 8 *@
            @for(i <- question.answers.size + 1 until 9) {
                <div class="form-group">
                    <label class="control-label col-sm-2">@i. Antwort:</label>
                    <div class="col-sm-10" id="answerDiv">
                        <div class="input-group">
                            <input hidden name="correctness_@i" id="correctness_@i" value="WRONG">
                            <input class="form-control" name="@i" id="@i" placeholder="Antwort @i">
                            <div class="input-group-btn">
                            @for(correctness <- model.questions.QuestionEnums.Correctness.values()) {
                                <button type="button" onclick="changeCorrectness(@i, '@correctness', this)" title="@correctness.title"
                                class="btn btn-@if(correctness == model.questions.QuestionEnums.Correctness.WRONG) {danger} else {default}">
                                    <span class="@correctness.bsGlyphicon"></span>
                                </button>
                            }
                            </div>
                        </div>
                    </div>
                </div>
            }

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-primary">Frage aktualisieren</button>
                </div>
            </div>
        </form>
    </div>
}