@(user: model.User, completeEx: model.programming.ProgCompleteEx)

@solutionVar = @{
    "solution"
}

@scriptsBefore = {
    <!-- Important: Order of Scripts -->
    <script src="@routes.Assets.versioned("lib/lodash/lodash.js")"></script>
    <script src="@routes.Assets.versioned("lib/backbonejs/backbone.js")"></script>
    <script src="@routes.Assets.versioned("lib/jointjs/dist/joint.js")"></script>
}

@scripts = {
    <script src="@routes.Assets.versioned("lib/autosize/dist/autosize.js")"></script>
    <script src="@routes.Assets.versioned("lib/filesaver/FileSaver.js")"></script>

    <script src="@routes.Assets.versioned("javascripts/umlActivity/elements.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/drawing.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/languageBuilders.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/converter.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/webseite.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/classdiagram.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/umlActivityTests.js")"></script>

    <link rel="stylesheet" href="@routes.Assets.versioned("lib/jointjs/dist/joint.css")">
    <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/umlActivity/webseite.css")">
    <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/umlActivity/activity.css")">

    <script>
            // Parameters for Task
            const parameters = {
                methodName: '@completeEx.ex.functionName',
                startNode: {
                    inputType: 'String',
                    input: 'W1'
                },
                endNode: {
                    outputType: 'int',
                    output: '@solutionVar'
                }
            };
    </script>

}

@main("UML", user, scripts, scriptsBefore) {

    @core.helperTemplates.modal("Bedienungsanleitung", "instructionsModal", "lg") {
        @umlActivity.activityInstructions.render()
    }

    @core.helperTemplates.modal("Klassendiagramm", "classDiagModal", "lg") {
        <div id="classdiagram"></div>
    }

        <!-- Main Page-->
    <div id="fullscreen" class="container-fluid">
        <div class="row">
            <div class="col-md-8" id="leftblock">

                <div class="row" id="buttonDivs">
                        <!-- Aktionsknoten -->
                    <div class="col-md-4">
                        <div class="dropdown">
                            <button class="btn btn-default btn-block dropdown-toggle" type="button" data-toggle="dropdown">
                                Aktionsknoten <span class="caret"></span></button>
                            <ul class="dropdown-menu btn-block">
                                <li class="dropdown-header">Aktionsknoten</li>
                                <li>
                                    <a onclick="setSelElement(this);" name="elementActionDeclare" draggable="true" ondragstart="drag(event)">
                                        Deklarationsknoten</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a onclick="setSelElement(this);" name="elementActionInput" draggable="true" ondragstart="drag(event)">
                                        Eingabefeldknoten</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a onclick="setSelElement(this);" name="elementActionSelect" draggable="true" ondragstart="drag(event)">
                                        Selektionsknoten</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                        <!-- Schleifen -->
                    <div class="col-md-4">
                        <div class="dropdown">
                            <button class="btn btn-default btn-block dropdown-toggle" type="button" data-toggle="dropdown">
                                Schleifen <span class="caret"></span></button>
                            <ul class="dropdown-menu btn-block">
                                <li class="dropdown-header">Schleifenknoten</li>
                                <li>
                                    <a onclick="setSelElement(this);" name="elementFor" draggable="true" ondragstart="drag(event)">For-In-Schleifenknoten</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a onclick="setSelElement(this);" name="elementDoWhile" draggable="true" ondragstart="drag(event)">
                                        Do-While-Schleifenknoten</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a onclick="setSelElement(this);" name="elementWhileDo" draggable="true" ondragstart="drag(event)">
                                        While-Do-Schleifenknoten</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                        <!-- Bearbeitungsknoten -->
                    <div class="col-md-4">
                        <div class="dropdown">
                            <button class="btn btn-default btn-block dropdown-toggle" type="button" data-toggle="dropdown">
                                Spezielle Knoten <span class="caret"></span></button>
                            <ul class="dropdown-menu btn-block">
                                <li class="dropdown-header">Spezielle Knoten</li>
                                <li>
                                    <a onclick="setSelElement(this);" name="elementIf" draggable="true" ondragstart="drag(event)">If-Then-Else</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a onclick="setSelElement(this);" name="elementBasic" draggable="true" ondragstart="drag(event)">Verzweigungsknoten</a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <a onclick="setSelElement(this);" name="elementEdit" draggable="true" ondragstart="drag(event)">Bearbeitungsknoten</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <hr>

                <div id="scroll">
                    <div ondrop="drop(event)" ondragover="allowDrop(event)" id="paper"></div>
                </div>
            </div>

            <div class="col-md-4" id="rightblock">

                <div class="row">
                    <div class="col-md-12">
                        <h4>Konvertierung in Code</h4>
                        <div class="input-group">
                            <select title="Programmiersprache" class="form-control" id="selectedLanguage">
                            @for(lang <- model.programming.ProgLanguage.values) {
                                <option value="@lang.aceName">@lang.languageName</option>
                            }
                            </select>
                            <span class="input-group-addon">-Code</span>
                            <button id="mainGeneration" class="form-control btn-primary" onclick="mainGeneration()">generieren</button>
                        </div>
                    </div>
                </div>

                <hr>

                <div class="panel-group" id="accordion">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#ExerciseText">Aufgabenstellung</a>
                            </h4>
                        </div>
                        <div id="ExerciseText" class="panel-collapse collapse in">
                            <div class="panel-body">

                                <div class="form-group">
                                    <div class="btn-group btn-group-justified">
                                        <div class="btn-group">
                                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#instructionsModal">
                                                Bearbeitungshinweise
                                            </button>
                                        </div>
                                        <div class="btn-group">
                                            <button type="button" class="btn btn-default" data-toggle="modal" data-target="#classDiagModal">
                                                Klassendiagramm
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <p>@Html(completeEx.text)</p>

                                <p>Speichern Sie ihre L&ouml;sung in der Variable <code>@solutionVar</code>, die (automatisch) zur&uuml;ckgegeben wird.</p>

                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#Configuration">Konfiguration</a>
                            </h4>
                        </div>
                        <div id="Configuration" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="drawingElements">
                                    <div>
                                        <h4>Ansicht</h4>
                                        <div class="input-group">
                                            <button class="form-control" id="startFullscreen">&#10530;</button>
                                            <span class="input-group-addon">Fullscreen</span>
                                            <button class="form-control" id="endFullscreen">&#10060;</button>
                                        </div>
                                        <hr>
                                        <div class="input-group">
                                            <button class="form-control" id="otop">&#8593;</button>
                                            <button class="form-control" id="obot">&#8595;</button>
                                            <span class="input-group-addon">
                                                <button class="btn btn-default" id="viewreset">Reset</button>
                                            </span>
                                            <button class="form-control" id="oleft">&#8592;</button>
                                            <button class="form-control" id="oright">&#8594;</button>
                                        </div>
                                        <h4>Zeichenfl&auml;che</h4>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <button class="form-control" id="paperplus">+</button>
                                                    <span class="input-group-addon">Gr&ouml;&szlig;e</span>
                                                    <button class="form-control" id="paperminus">-</button>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="input-group">
                                                    <button class="form-control" id="zoomplus">+</button>
                                                    <span class="input-group-addon">Zoom</span>
                                                    <button class="form-control" id="zoomminus">-</button>
                                                </div>
                                            </div>
                                        </div>
                                        <hr>
                                        <h4>Import / Export</h4>
                                        <input class="btn btn-block btn-default" type="file" id="file">

                                        <div class="btn-group btn-group-justified">
                                            <div class="btn-group">
                                                <button class="btn btn-default" onclick="saveGraphAsTxt()">Exportieren</button>
                                            </div>
                                            <div class="btn-group">
                                                <button class="btn btn-default" id="graph_imp">Importieren</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a data-toggle="collapse" data-parent="#accordion" href="#ProgrammCode">Programmiercode</a>
                            </h4>
                        </div>
                        <div id="ProgrammCode" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div class="drawingElements">
                                    <div>
                                        <h4>Ermittelter Code</h4>
                                        <pre id="preCode"></pre>
                                        <form action="javascript:testSol('@controllers.exes.idPartExes.routes.UmlController.activityCheckSolution()')">
                                            <button id="sendToServer" title="Generieren Sie zuerst den Code!" disabled class="btn btn-default btn-block">
                                                Aufgabe verifizieren</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}