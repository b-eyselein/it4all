@(user: model.User, completeEx: model.programming.ProgCompleteEx, toolObject: model.toolMains.IdExerciseToolMain)

@solutionVar = @{
    "solution"
}

@scriptsBefore = {
    <!-- Important: Order of Scripts -->
    <script src="@routes.Assets.versioned("lib/lodash/lodash.js")"></script>
    <script src="@routes.Assets.versioned("lib/backbonejs/backbone.js")"></script>
    <script src="@routes.Assets.versioned("lib/jointjs/dist/joint.js")"></script>
}

@scripts = {
    @* Javascript Routes *@
    <script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>

@core.helperTemplates.fullScreenScripts.render()

    <script src="@routes.Assets.versioned("lib/autosize/dist/autosize.js")"></script>
    <script src="@routes.Assets.versioned("lib/filesaver/FileSaver.js")"></script>

    <script src="@routes.Assets.versioned("javascripts/umlActivity/elements.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/drawing.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/languageBuilders.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/converter.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/webseite.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/classdiagram.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/umlActivity/umlActivityTests.js")"></script>

    <link rel="stylesheet" href="@routes.Assets.versioned("lib/jointjs/dist/joint.css")">
    <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/umlActivity/webseite.css")">
    <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/umlActivity/activity.css")">

        <!--suppress JSUnusedLocalSymbols -->
    <script>
            // Parameters for Task
            const EXERCISE_PARAMETERS = {
                methodName: '@completeEx.ex.functionName',
                methodParameters: '@Html( model.programming.ProgLanguage.STANDARD_LANG.buildParameters(completeEx.inputTypes))',
                output: {
                    outputType: '@completeEx.ex.outputType.typeName',
                    output: '@solutionVar',
                    defaultValue: '@Html(completeEx.ex.outputType.defaultValue( model.programming.ProgLanguage.STANDARD_LANG))'
                }
            };
    </script>

}

@main("UML", Some(user), scripts, scriptsBefore) {

    @core.helperTemplates.modal("Bedienungsanleitung", "instructionsModal", "lg") {
        @umlActivity.activityInstructions.render()
    }

    @core.helperTemplates.modal("Klassendiagramm", "classDiagModal", "lg") {
        <div id="classdiagram"></div>
    }

        <!-- Main Page-->
    <div id="fullsc" class="container-fluid">

        <ul class="nav nav-tabs nav-justified">
            <li class="active"><a data-toggle="tab" href="#drawingTab">Zeichenfläche</a></li>
            <li><a data-toggle="tab" id="resultTabToggle" href="#resultTab">Generierter Code &amp; Resultate</a> </li>
        </ul>

        <div class="tab-content">
            <div id="drawingTab" class="tab-pane fade in active">
                <div class="row">
                    <div class="col-md-8">

                        <div class="form-group">
                            <div class="btn-group btn-group-justified" id="buttonsDiv">
                                <a class="btn btn-warning" onclick="setSelElement(this);" data-elemname="elementActionInput">@*Einfacher *@Aktionsknoten</a>
                                @*<button onclick="setSelElement(this);" name="elementActionSelect">Auswahlaktionsknoten</button>*@
                                @*<button onclick="setSelElement(this);" name="elementActionSelect">Deklarationsaktionsknoten</button>*@

                                <a class="btn btn-warning" onclick="setSelElement(this);" data-elemname="elementFor">For-Schleife</a>
                                <a class="btn btn-warning" onclick="setSelElement(this);" data-elemname="elementWhileDo">While-Schleife</a>
                                <a class="btn btn-warning" onclick="setSelElement(this);" data-elemname="elementDoWhile">Do-While-Schleife</a>
                                <a class="btn btn-warning" onclick="setSelElement(this);" data-elemname="elementIfThen">If-Then-Verzweigung</a>
                                <a class="btn btn-warning" onclick="setSelElement(this);" data-elemname="elementIf">If-Else-Verzweigung</a>

                                <a class="btn btn-warning" onclick="setSelElement(this);" data-elemname="elementEdit">Bearbeitungsknoten</a>
                            </div>
                        </div>

                        <div id="leftblock">
                            <div ondrop="drop(event)" ondragover="allowDrop(event)" id="paper"></div>
                        </div>
                    </div>

                    <div class="col-md-4" id="rightblock">

                        <section>
                            <h3>Konvertierung in Code</h3>

                            <div class="form-group">
                                <div class="input-group">
                                    <select title="Programmiersprache" class="form-control" id="selectedLanguage">
                                    @for(lang <- model.programming.ProgLanguage.values) {
                                        <option value="@lang.aceName">@lang.languageName</option>
                                    }
                                    </select>
                                    <span class="input-group-addon">-Code</span>
                                    <button id="mainGeneration" class="form-control btn-primary" onclick="mainGeneration()">
                                        generieren</button>
                                </div>
                            </div>

                            <div id="generationAlerts"></div>


                            <div class="form-group">
                                <button type="button" class="btn btn-default btn-block" onclick="toggleFullscreen()">
                                    Toggle Fullscreen <span class="glyphicon glyphicon-resize-full" id="fullscBtnSpan"></span>
                                </button>
                            </div>

                            <div class="form-group">
                                <div class="btn-group btn-group-justified">
                                    <div class="btn-group">
                                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#instructionsModal">
                                            Bearbeitungshinweise
                                        </button>
                                    </div>
                                    @* FIXME: class diagram deactivated until further notice... *@
                                    @*<div class="btn-group">*@
                                    @*<button type="button" class="btn btn-default" data-toggle="modal" data-target="#classDiagModal">*@
                                    @*Klassendiagramm*@
                                    @*</button>*@
                                    @*</div>*@
                                </div>
                            </div>
                        </section>

                        <hr>

                        <section>
                            <h3 class="text-center">Aufgabenstellung</h3>

                            <div class="well">@Html(completeEx.ex.text)</div>
                        </section>

                        <hr>

                        <div class="form-group">
                            <button class="btn btn-info btn-block" data-toggle="collapse" data-target="#configSection">
                                Ansicht &amp; Zeichenfläche</button>
                        </div>

                        <section id="configSection" class="collapse">
                            <h4>Ansicht</h4>

                            <div class="form-group">
                                <div class="input-group">
                                    <button class="form-control" id="otop">&#8593;</button>
                                    <button class="form-control" id="obot">&#8595;</button>
                                    <span class="input-group-addon">
                                        <button class="btn btn-default" id="viewreset">Reset</button>
                                    </span>
                                    <button class="form-control" id="oleft">&#8592;</button>
                                    <button class="form-control" id="oright">&#8594;</button>
                                </div>
                            </div>

                            <h4 class="text-center">Zeichenfläche</h4>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <button class="form-control" id="paperplus">+</button>
                                        <span class="input-group-addon">Größe</span>
                                        <button class="form-control" id="paperminus">-</button>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <button class="form-control" id="zoomplus">+</button>
                                        <span class="input-group-addon">Zoom</span>
                                        <button class="form-control" id="zoomminus">-</button>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <hr>

                        <div class="form-group">
                            <button class="btn btn-info btn-block" data-toggle="collapse" data-target="#importExportSection">
                                Import / Export</button>
                        </div>


                        <section id="importExportSection" class="collapse">
                            <div class="form-group">
                                <input class="btn btn-block btn-default" type="file" id="file">
                            </div>
                            <div class="form-group">
                                <div class="btn-group btn-group-justified">
                                    <div class="btn-group">
                                        <button class="btn btn-default" onclick="saveGraphAsTxt()">
                                            Exportieren</button>
                                    </div>
                                    <div class="btn-group">
                                        <button class="btn btn-default" id="graph_import">Importieren</button>
                                    </div>
                                </div>
                            </div>
                        </section>

                    </div>
                </div>
            </div>

            <div id="resultTab" class="tab-pane fade">

                <div class="row">
                    <div class="col-md-6">
                        <h2>Generierter Code</h2>

                        <pre id="preCode"></pre>

                        <input hidden id="toolType" value="@toolObject.urlPart" title="hidden">
                        <input hidden type="number" id="exerciseId" value="@completeEx.id" title="hidden">
                        <input hidden id="exercisePart" value="@model.programming.ActivityDiagram.urlName" title="hidden">

                        <button id="testButton" title="Generieren Sie zuerst den Code!" disabled class="btn btn-default btn-block">
                            Aufgabe verifizieren</button>


                    </div>

                    <div class="col-md-6">
                        <h2>Resultate</h2>

                        <div id="resultDiv" class="panel-collapse collapse">
                            <div class="panel-body">
                                <div id="correction"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>


    </div>

}