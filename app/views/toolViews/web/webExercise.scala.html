@import model.tools.web.{WebExPart, WebExParts, WebExercise, WebToolMain}
@import model.{ExerciseCollection, User}

@(user: User, collection: ExerciseCollection, exercise: WebExercise, part: WebExPart, toolMainObject: WebToolMain)(implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider)

@title = @{
    s"Tool Web, Sammlung ${collection.id}, Aufgabe ${exercise.id}"
}

@additionalScripts = {
    <script>SystemJS.import('@routes.Assets.versioned("app/web/webExercise.js")');</script>
}

@exerciseText = {
    <span>@exercise.text</span>

@if(part == WebExParts.HtmlPart) {
    <span>@Html(exercise.htmlText getOrElse "")</span>
    <ol>
    @for(task <- exercise.tasksForPart(part).sortBy(_.id)) {
        <li><span id="text_@task.id">@task.text</span></li>
    }
    </ol>
} else {
    <p>@Html(exercise.jsText getOrElse "")</p>
    <p>Es gibt insgesamt @exercise.tasksForPart(part).size Testfälle.</p>
}

}

@solutionPreview = {
    <div id="previewTab" class="tab-pane fade">
        <div class="alert alert-warning" id="previewChangedDiv">
            Ihre Lösung hat sich geändert. Laden Sie sie neu, indem Sie diesen Tab neu aufrufen.</div>
        <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" src="@coll.routes.CollectionController.webSolution(collection.id, exercise.id, part.urlName, exercise.siteSpec.fileName)" id="preview"></iframe>
        </div>
    </div>
}

@toolViews.ideExercise(user, title, exerciseText, exercise.files.map(_.name), exercise.files.headOption, toolMainObject,
    collection, exercise, part, solutionPreview = Some(solutionPreview), additionalScripts)
