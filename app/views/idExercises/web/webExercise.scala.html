@import model.web.{WebCompleteEx, WebExPart, WebToolMain}

@(user: model.User, exercise: WebCompleteEx, part: WebExPart, oldSolution: String, toolMainObject: WebToolMain)(
        implicit requestHeader: RequestHeader, messagesProvider: MessagesProvider)

@additionalScripts = {
    <script>SystemJS.import('@routes.Assets.versioned("app/web/webExercise.js")');</script>
}

@exerciseText = {
    <span>@exercise.text</span>

@if(part == model.web.WebExParts.HtmlPart) {
    <span>@Html(exercise.htmlText getOrElse "")</span>
    <ol>
    @for(task <- exercise.tasksForPart(part).sortBy(_.task.id)) {
        <li><span id="text_@task.task.id">@task.task.text</span></li>
    }
    </ol>
} else {
    <p>@Html(exercise.jsText getOrElse "")</p>
    <p>Es gibt insgesamt @exercise.tasksForPart(part).size Testfälle.</p>
}

}

@solutionPreview = {
    <div id="previewTab" class="tab-pane fade">
        <div class="alert alert-warning" id="previewChangedDiv">
            Ihre Lösung hat sich geändert. Laden Sie sie neu,
            indem Sie diesen Tab neu aufrufen.</div>
        <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" src="@exes.routes.ExerciseController.webSolution(exercise.id, part.urlName)" id="preview"></iframe>
        </div>
    </div>
}

@idExercises.textExercise(user, exerciseText, exercise, part, oldSolution, toolMainObject, additionalScripts,
    solutionPreview = Some(solutionPreview))