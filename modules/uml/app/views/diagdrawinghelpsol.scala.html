@(user: model.user.User, result: model.result.DiagramDrawingResult)

@main("UML-Test", user) {
<div class="container-fluid">
  <div class="page-header">
    <h1> Korrektur der Aufgabe &quot;@result.getExercise().title&quot;</h1>	
  </div>

  <div class="row">
    <div class="col-md-8">
      <h1>Assoziationen</h1>
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Korrektheit</th>
            <th class="text-center" colspan="2">Typ</th>
            <th>Start</th>
            <th>Ziel</th>
            <th class="text-center" colspan="2">Multiziplität</th>
          </tr>
          <tr>
            <th/>
            <th>Lerner</th>
            <th>Muster</th>
            <th/>
            <th/>
            <th>Lerner</th>
            <th>Muster</th>
        </thead>
        
        <tbody>
          <tr>
            <th colspan="7" class="text-center">(Teilweise) Korrekt</th>
          </tr>
        @for(corrAssoc <- result.getAssociationResult().getMatches().asInstanceOf[List[model.matcher.UmlAssociationMatch]]) {
          <tr>
            @if(corrAssoc.isCorrect()) {
            <td class="success text-center"><span class="glyphicon glyphicon-ok"></span>
            } else {
            <td class="warning text-center"><span class="glyphicon glyphicon-remove"></span>
            }
            @if(corrAssoc.isAssocTypeEqual()) {
            <td class="success text-center" colspan="2">@corrAssoc.getFirstArg().getAssocType().getName()</td>
            } else {
            <td class="danger">@corrAssoc.getFirstArg().getAssocType().getName()</td>
            <td>@corrAssoc.getSecondArg().getAssocType().getName()</td>
            }
      	    <td>@corrAssoc.getFirstArg().getEnds().get(0).getEndName()</td>
            <td>@corrAssoc.getFirstArg().getEnds().get(1).getEndName()</td>
            @if(corrAssoc.areMultiplicitiesEqual()) {
            <td class="success text-center" colspan="2">@corrAssoc.getCorrectMultiplicity()</td>
            } else {
            <td class="danger">@corrAssoc.getFirstArg().multsAsString()</td>
            <td>@corrAssoc.getCorrectMultiplicity()</td>
            }
          </tr>
          }
          
          <tr><td colspan="7">&nbsp;</td></tr>
          
          <tr>
            <th colspan="7" class="text-center">Falsch</th>
          </tr>
        @for(wrongAssoc <- result.getAssociationResult().getWrong()) {
          <tr>
            <td class="danger text-center"><span class="glyphicon glyphicon-remove" title="Falsch"></span></td>
            <td>@wrongAssoc.getAssocType().getName()</td>
            <td/>
            <td>@wrongAssoc.getEnds().get(0).getEndName()</td>
            <td>@wrongAssoc.getEnds().get(1).getEndName()</td>
            <td>@wrongAssoc.getEnds().get(0).getMultiplicity().getRepresentant() : @wrongAssoc.getEnds().get(1).getMultiplicity().getRepresentant()</td>
            <td/>
          </tr>
          }
          
          <tr><td colspan="7">&nbsp;</tr>
          
          <tr>
            <th colspan="7" class="text-center">Fehlend</th>
          </tr>
          
        @for(missingAssoc <- result.getAssociationResult().getMissing()) {
          <tr>
            <td class="warning text-center"><span class="glyphicon glyphicon-minus" title="Fehlend"></span></td>
            <td/>
            <td>@missingAssoc.getAssocType().getName()</td>
            <td>@missingAssoc.getEnds().get(0).getEndName()</td>
            <td>@missingAssoc.getEnds().get(1).getEndName()</td>
            <td/>
            <td>@missingAssoc.getEnds().get(0).getMultiplicity().getRepresentant() : @missingAssoc.getEnds().get(1).getMultiplicity().getRepresentant()</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
    
    <div class="col-md-4">
      <h1>Vererbungen</h1>
      <table class="table table-hover">
        <thead>
          <tr>
            <th>Korrektheit</th>
            <th>Subklasse</th>
            <th>Superklasse</th>
          </tr>
          <tr><th colspan="3">&nbsp;</th></tr>
        </thead>
        
        <tbody>
          <tr>
            <th colspan="3" class="text-center">Korrekt</th>
          </tr>
        @for(correctImpl <- result.getImplementationResult().getMatches()) {
          <tr>
            <td class="success text-center"><span class="glyphicon glyphicon-ok"></span>
            <td>@correctImpl.getFirstArg().getSubClass()</td>
            <td>@correctImpl.getFirstArg().getSuperClass()</td>
          </tr>
          }
          
          <tr><td colspan="3">&nbsp;</td></tr>
          <tr>
            <th colspan="3" class="text-center">Falsch</th>
          </tr>
        @for(wrongImpl <- result.getImplementationResult().getWrong()) {
          <tr>
            <td class="danger text-center"><span class="glyphicon glyphicon-remove"></span>
            <td>@wrongImpl.getSubClass()</td>
            <td>@wrongImpl.getSuperClass()</td>
          </tr>
          }
          
          <tr><td colspan="3">&nbsp;</td></tr>
          <tr>
            <th colspan="3" class="text-center">Fehlend</th>
          </tr>
        @for(missingImpl <- result.getImplementationResult().getMissing()) {
          <tr>
            <td class="warning text-center"><span class="glyphicon glyphicon-minus"></span>
            <td>@missingImpl.getSubClass()</td>
            <td>@missingImpl.getSuperClass()</td>
          </tr>
          }
        </tbody>
      </table>
    </div>
    
  </div>
  
  <hr>
  
  <a href="@uml.routes.UML.matching(result.getExercise.id)" class="btn btn-primary btn-block">Zum nächsten Aufgabenteil</a>
</div>
}
