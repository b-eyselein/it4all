fragment LessonIdentifier on Lesson {
  lessonId
  title
  description
  video
}

# /tools/:toolId/lessons

query LessonsForTool($userJwt: String!, $toolId: String!) {
  me(userJwt: $userJwt) {
    tool(toolId: $toolId) {
      name
      lessons {
        ...LessonIdentifier
      }
    }
  }
}

# /tools/:toolId/lessons/:lessonId

fragment LessonOverview on Lesson {
  title
  description
  video
  contentCount
}

query LessonOverview($userJwt: String!, $toolId: String!, $lessonId: Int!) {
  me(userJwt: $userJwt) {
    tool(toolId: $toolId) {
      lesson(lessonId: $lessonId) {
        ...LessonOverview
      }
    }
  }
}

# /tools/:toolId/lessons/:lessonId/asText

fragment LessonTextContent on LessonTextContent {
  __typename
  contentId
  content
}

fragment LessonMultipleChoiceQuestionAnswer on LessonMultipleChoiceQuestionAnswer {
  id
  answer
  isCorrect
}

fragment LessonMultipleChoiceQuestion on LessonMultipleChoiceQuestion {
  id
  questionText
  answers {
    ...LessonMultipleChoiceQuestionAnswer
  }
}

fragment LessonMultipleChoiceQuestionContent on LessonMultipleChoiceQuestionsContent {
  __typename
  contentId
  questions {
    ...LessonMultipleChoiceQuestion
  }
}

fragment LessonAsText on Lesson {
  lessonId
  title
  description
  contents  {
    ...on LessonTextContent {
      ...LessonTextContent
    }
    ... on LessonMultipleChoiceQuestionsContent {
      ...LessonMultipleChoiceQuestionContent
    }
  }
}

query LessonAsText($userJwt: String!, $toolId: String!, $lessonId: Int!) {
  me(userJwt: $userJwt) {
    tool(toolId: $toolId) {
      lesson(lessonId: $lessonId) {
        ...LessonAsText
      }
    }
  }
}

# /tools/:toolId/lesson/:lessonId/asVideo

query LessonAsVideo($userJwt: String!, $toolId: String!, $lessonId: Int!) {
  me(userJwt: $userJwt) {
    tool(toolId: $toolId) {
      lesson(lessonId: $lessonId) {
        title
        video
      }
    }
  }
}
