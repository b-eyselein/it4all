mutation SqlCorrection($userJwt: String!, $collId: Int!, $exId: Int!, $part: SqlExPart!, $solution: String!) {
  correctSql(userJwt: $userJwt, collId: $collId, exId: $exId,part: $part, solution: $solution) {
    __typename
    solutionSaved
    points
    maxPoints
    ...SqlInternalErrorResult
    ...SqlIllegalQueryResult
    ...SqlWrongQueryTypeResult
    ...SqlResult
  }
}

fragment SqlInternalErrorResult on SqlInternalErrorResult {
  msg
}

fragment SqlIllegalQueryResult on SqlIllegalQueryResult {
  message
}

fragment SqlWrongQueryTypeResult on SqlWrongQueryTypeResult {
  message
}

# Column comparison

fragment ColumnMatch on SqlColumnMatch {
  matchType
  userArg
  sampleArg
}

fragment ColumnComparison on SqlColumnComparisonMatchingResult {
  ...MR
  #  allMatches {
  #    ...ColumnMatch
  #  }
}

# Table comparison

fragment TableMatch on SqlTableMatch {
  matchType
  userArg
  sampleArg
}

fragment TableComparison on SqlTableComparisonMatchingResult {
  ...MR
  #  allMatches {
  #    ...TableMatch
  #  }
}

# JoinExpression / Where Comparison

fragment BinaryExpressionMatch on SqlBinaryExpressionMatch {
  matchType
  userArg
  sampleArg
}

fragment BinaryExpressionComparison on SqlBinaryExpressionComparisonMatchingResult {
  ...MR
  #  allMatches {
  #    ...BinaryExpressionMatch
  #  }
}

# Insert comparison

fragment InsertMatch on SqlInsertMatch {
  matchType
  userArg
  sampleArg
}

fragment InsertComparison on SqlInsertComparisonMatchingResult {
  ...MR
  #  allMatches {
  #    ...InsertMatch
  #  }
}

# Group by comparison

fragment GroupByMatch on SqlGroupByMatch {
  matchType
  sampleArg
  userArg
}

fragment  GroupByComparison on SqlGroupByComparisonMatchingResult {
  ...MR
  #  allMatches  {
  #    ...GroupByMatch
  #  }
}

# Order By comparison

fragment OrderByMatch on SqlOrderByMatch {
  matchType
  sampleArg
  userArg
}

fragment OrderByComparison on SqlOrderByComparisonMatchingResult {
  ...MR
  #  allMatches {
  #    ...OrderByMatch
  #  }
}

# Limit comparison

fragment LimitMatch on SqlLimitMatch {
  matchType
  sampleArg
  userArg
}

fragment LimitComparison on SqlLimitComparisonMatchingResult {
  ...MR
  #  allMatches {
  #    ...LimitMatch
  #  }
}

# Select additional comparisons

fragment SelectAdditionalComparison on SelectAdditionalComparisons {
  groupByComparison {
    ...GroupByComparison
  }
  orderByComparison {
    ...OrderByComparison
  }
  limitComparison {
    ...LimitComparison
  }
}

# Complete result

fragment SqlResult on SqlResult {
  staticComparison {
    columnComparison {
      ...ColumnComparison
    }
    tableComparison {
      ...MR
      ...TableComparison
    }
    joinExpressionComparison {
      ...BinaryExpressionComparison
    }
    whereComparison {
      ...BinaryExpressionComparison
    }
    additionalComparisons {
      selectComparisons {
        ...SelectAdditionalComparison
      }
      insertComparison {
        ...InsertComparison
      }
    }
  }
  executionResult {
    ...SqlExecutionResult
  }
}

fragment SqlExecutionResult on SqlExecutionResult {
  userResult {
    ...SqlQueryResult
  }
  sampleResult {
    ...SqlQueryResult
  }
}

fragment SqlQueryResult on SqlQueryResult {
  tableName
  columnNames
  rows {
    ...SqlRow
  }
}

fragment SqlRow on SqlRow {
  cells {
    key
    value {
      ...SqlCell
    }
  }
}

fragment SqlCell on SqlCell {
  colName
  content
  different
}

# other fragments

fragment NewMatch on NewMatch {
  matchType
  sampleArgDescription
  userArgDescription
}

fragment MR on MatchingResult  {
  points
  maxPoints
  allMatches {
    ...NewMatch
  }
}
